<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModel="clr-namespace:TalkBack.ViewModels"
             xmlns:mauiKit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="TalkBack.Views.MainPage"
             x:DataType="viewModel:MainPageViewModel"
             SafeAreaEdges="All"
             BackgroundColor="#F8F9FA">
    <Page.Behaviors>
        <mauiKit:StatusBarBehavior StatusBarColor="Black" />
    </Page.Behaviors>
    <ScrollView>
        <VerticalStackLayout Padding="30"
                             Spacing="32"
                             VerticalOptions="Center">
            <!-- Recording Timer (only visible when recording) -->
            <Border IsVisible="{Binding ShowTimer}"
                    StrokeThickness="0"
                    BackgroundColor="#2C3E50"
                    Padding="32,24"
                    HorizontalOptions="Center"
                    Shadow="{Shadow Brush=#20000000, Offset='0,4', Radius=20, Opacity=0.15}">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="8">
                    <Label Text="{Binding RecordingTime}"
                           FontSize="48"
                           FontAttributes="Bold"
                           TextColor="#FF6B6B"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
                    <Label Text="/ 30:00"
                           FontSize="16"
                           TextColor="#ECF0F1"
                           Opacity="0.75"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />
                </VerticalStackLayout>
            </Border>
            <!-- Progress Bar -->
            <!-- <ProgressBar Progress="{Binding RecordingProgress}"
                         IsVisible="{Binding ShowTimer}"
                         ProgressColor="{StaticResource Primary}"
                         HeightRequest="8"
                         Margin="0,0,0,10" /> -->
            <!-- Transcribed Text -->
            <Label Text="{Binding TranscribedText}"
                   FontSize="18"
                   TextColor="#2C3E50"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   VerticalOptions="Center"
                   Margin="0,20" />
            <!-- Microphone Button -->
            <Border StrokeThickness="0"
                    BackgroundColor="Transparent"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    Padding="0"
                    Shadow="{Shadow Brush=#30000000, Offset='0,6', Radius=24, Opacity=0.2}">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="60" />
                </Border.StrokeShape>
                <ImageButton Source="{Binding MicIcon}"
                             WidthRequest="100"
                             HeightRequest="100"
                             BackgroundColor="Transparent"
                             Command="{Binding ToggleRecordingCommand}"
                             CornerRadius="60"
                             Padding="0" />
            </Border>
            <!-- Recording Hint -->
            <Border IsVisible="{Binding IsRecording}"
                    StrokeThickness="0"
                    BackgroundColor="#FFF3CD"
                    Padding="16,10"
                    HorizontalOptions="Center">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                </Border.StrokeShape>
                <Label Text="Maximum recording time: 30 minutes"
                       FontSize="13"
                       TextColor="#856404"
                       HorizontalOptions="Center"
                       FontAttributes="Bold" />
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>